\documentclass[12pt,letterpaper]{article}
\usepackage[utf8x]{inputenc}
\usepackage{ucs}
\author{Zi Yan\\PennID:14137362}
\title{CIS501 Homework 3a}
\date{}
\begin{document}
\maketitle

\section{Performance and CPI}
I will choose multiplies. Because making multiplies fast will reduce CPI
from 4.88 to 4.24, more significant than the other choices.

\section{Averaging}
The total number of branches is $\frac{1M}{4}+\frac{2M}{8} = 0.5M$.
So in every $\frac{3M}{0.5M} = 6$ instructions, there is one branch.

\section{Amdahl's Law}
\paragraph*{a}
The CPI of this program is $1 \times (1-10\%) + 20 \times 10\% = 2.9$.

\paragraph*{b}
Assume there are $x$ instructions. So $\frac{20\times10\%\times x}{2.9x}
=69.0\%$.

\paragraph*{c}
The CPI after speedup is $1\times (1-10\%) + \frac{20}{2}\times 10\% = 1.9$.
So it is $\frac{2.9}{1.9}=1.53$ times faster.

\paragraph*{d}
The CPI after speedup is $1\times (1-10\%) + \frac{20}{5}\times 10\% = 1.3$.
So it is $\frac{2.9}{1.3}=2.23$ times faster.

\paragraph*{e}
The CPI after speedup is $1\times (1-10\%) + \frac{20}{20}\times 10\% = 1$.
So it is $\frac{2.9}{1}=2.9$ times faster.

\paragraph*{f}
The CPI after speedup is $1\times (1-10\%) = 0.9$.
So it is $\frac{2.9}{0.9}=3.22$ times faster.

\section{Performance and ISA}
\paragraph*{a}
Assume there are $I$ instructions in x86 version P1, then there are $1.5I$ 
instructions in ARM version.
Chip A uses $T_A = \frac{1.5I \times 2}{2.5 \times 10^9} = 
1.2\times 10^{-9}I$ sec, and Chip B uses $T_B = \frac{I\times 3}{3\times10^9}
 = 1\times10^{-9}I$
sec. So B is $\frac{1.2\times 10^{-9}I}{1\times10^{-9}I} = 1.2$ times faster.

\paragraph*{b}
Assume there are $I$ instructions in x86 version P1, then there are $1.5I$ 
instructions in ARM version.
Chip A uses $T'_A = \frac{1.5I \times 1}{2.5 \times 10^9} = 
0.6\times 10^{-9}I$ sec, and Chip B uses $T'_B = \frac{I\times 2}{3\times10^9}
 = 0.67\times10^{-9}I$
sec. So A is $\frac{0.67\times 10^{-9}I}{0.6\times10^{-9}I} = 1.12$ times 
faster.

\paragraph*{c}
Assume there are $I$ instructions in x86 version P1, then there are $1.5I$ 
instructions in ARM version.
Chip A uses $T''_A =  T_A + T'_A = 1.8\times 10^{-9}I$ sec, and Chip B uses 
$T''_B = T_B + T'_B  = 1.67\times10^{-9}I$ sec. So B is $\frac{1.8\times 
10^{-9}I}{1.67\times10^{-9}I} = 1.078$ times faster altogether.


\section{ISA modification and Performance Metrics}
\paragraph*{a}
Let $p_{MA}$ denote the percentage of pairs of multiply/add instructions of all
instructions, $c$ denote the CPI, and $t$ denote the clock period.

So the time of executing $I$ instructions should be decrease, that is 
$I\times(1-p_{MA})\times1.1c\times1.05t < I \times c \times t$. Therefore,
$p_{MA}>13.4\%$.

Consequently, when there are more than 13.4\% multiply/add instruction pairs
in all instructions, adding the fused instruction will increase the overall 
performance.

\paragraph*{b}
Because the CPI and the clock period are both increased, it will more time to 
execute some certain amount of instruction. Therefore, the overall MIPS is
decreased.

\paragraph*{c}
In this example, even the MIPS is decreased, but the total execution time of
programs will be decreased because the total number of instructions is 
decreased. Thus, MIPS cannot be used as a general-purposed performance
metric.

\section{Caching}
\paragraph*{a}
The average memory access latency is $T_{hit1} + 20\%\times T_{miss1} = 21$

\paragraph*{b}
The average memory access latency is $T_{hit1} + (20\%\times (T_{hit2} +
(20\%\times T_{miss2}))) = 7$.

\paragraph*{c}
We want the average memory access latency to be lower, thus $T_{hit3} + 5\%
\times 100 < 7$, that is $T_{hit3} < 2$. So we need the cache hit time to be
less than 2 cycle.
\end{document}